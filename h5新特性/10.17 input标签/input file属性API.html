<!DOCTYPE html>
<html>
	<head>
		<title>newTarget</title>
		<meta charset = "utf-8">
	</head>
	<body>
		<input type = "file" name="fileUpload"  multiple = "multiple" id = "fileUploadId"/><br>
		<progress value = "0" max = "100" id = "fileProgressId"></progress><br>
		<input type="button" id = "btn1" value = "显示文件名"/>
		<input type="button" id = "btn2" value = "上次修改时间"/>
		<input type="button" id = "btn3" value = "二进制内容"/>
		<input type="button" id = "btn4" value = "文本内容"/>
		<input type="button" id = "btn5" value = "读取图片内容"/>
		<input type="button" id = "btn6" value = "进度条"/>
	</body>
	<script type="text/javascript">
		// //注意此处使用value取出文件路径，但不支持多文件取值  multiple 类型只能读到第一个文件路径
		// //console.log(document.getElementById("fileUploadId").value);
		// var fileInput = document.getElementById("fileUploadId");
		// var fileProgress = document.getElementById("fileProgressId");
		// //文件对象存在以下常用操作：
		// //文件名：name 文件类型： type 大小 size
		// document.getElementById("btn1").onclick = function(){
		// 	for(var n = 0;n < fileInput.files.length;n++){
		// 		console.log(fileInput.files[n].name+"  "+fileInput.files[n].type+"  "+fileInput.files[n].size);
		// 	}
		// };
		// //文件上次修改时间：lastModifiedDate
		// document.getElementById("btn2").onclick = function(){
		// 	for(var n = 0;n < fileInput.files.length;n++){
		// 		console.log(fileInput.files[n].lastModifiedDate);
		// 	}
		// };
		// //文件二进制内容：readAsBinaryString 读取文件内容，读取结果为一个 binary string。文件每一个 byte 会被表示为一个 [0..255] 区间内的整数。函数接受一个 File 对象作为参数。
		// document.getElementById("btn3").onclick = function(){
		// 	//此处务必注意浏览器支持检测 
		// 	if(!window.FileReader) return;
		// 	for(var n = 0;n < fileInput.files.length;n++){
		// 		//创建文件读取对象
		// 		var reader = new FileReader();
		// 		//读取文件，使用readAsBinaryString 函数接收文件对象为参数
		// 		reader.readAsBinaryString(fileInput.files[n]);
		// 		//文件读取对象的onload事件用于监听文件读取结束事件
		// 		reader.onload = function(){
		// 			//this.result 表示读取的文件内容	
		// 			console.log(this.result);
		// 			console.log("********************************")
		// 		}
		// 	}
		// };
		// //文件文本内容：readAsText 	读取文件内容，读取结果为一串代表文件内容的文本。函数接受一个 File 对象以及文本编码名称作为参数。
		// document.getElementById("btn4").onclick = function(){
		// 	if(!window.FileReader) return;
		// 	for(var n = 0;n < fileInput.files.length;n++){
		// 		//创建文件读取对象
		// 		var reader = new FileReader();
		// 		//文件文本内容：readAsText 函数接收文件对象为参数, 第二个参数为文件编码
		// 		reader.readAsText(fileInput.files[n], "utf-8");
		// 		//文件读取对象的onload事件用于监听文件读取结束事件
		// 		reader.onload = function(){
		// 			//this.result 表示读取的文件内容	
		// 			console.log(this.result);
		// 			console.log("********************************")
		// 		}
		// 	}
		// };

		// //读取图片类型文件：readAsDataURL 读取文件内容，读取结果为一个 data: 的 URL
		// document.getElementById("btn5").onclick = function(){
		// 	if(!window.FileReader) return;
		// 	for(var n = 0;n < fileInput.files.length;n++){
		// 		//创建文件读取对象
		// 		var reader = new FileReader();
		// 		//读取图片类型文件：readAsDataURL 函数接收文件对象为参数 
		// 		reader.readAsDataURL(fileInput.files[n]);
		// 		//文件读取对象的onload事件用于监听文件读取结束事件
		// 		reader.onload = function(){
		// 			//this.result 表示读取的文件内容	
		// 			var img = document.createElement("img");
		// 			img.src = this.result;
		// 			document.body.appendChild(img);
		// 		}
		// 	}
		// };

		// /*
		// 文件上传事件列表：
		// 	onabort 中断时触发
		// 	onerror 出错时触发
		// 	onload 文件读取成功完成时触发
		// 	onloadend 读取完成触发，无论成功或失败
		// 	onloadstart 读取开始时触发
		// 	onprogress 读取中
		// */

		// document.getElementById("btn6").onclick = function(){
		// 	if(!window.FileReader) return;
		// 	for(var n = 0;n < fileInput.files.length;n++){
		// 		//创建文件读取对象
		// 		var reader = new FileReader();
		// 		//读取图片类型文件：readAsDataURL 函数接收文件对象为参数 
		// 		reader.readAsBinaryString(fileInput.files[n]);
		// 		//文件读取对象的onload事件用于监听文件读取结束事件
		// 		(function(n){
		// 			reader.onprogress = function(e){
		// 				var value = Math.round(e.loaded / (fileInput.files[n].size) * 100);
		// 				fileProgress.value = value;
		// 			}
		// 		})(n)
		// 	}
		// };

		var fileInput = document.getElementById("fileUploadId");
		//使用file输入框files属性取得文件集合 下标取得文件 通过 name type size lastModifiedDate分别可取得文件的名字 类型和大小以及上一次修改时间
		document.getElementById("btn1").onclick = function(){
			for(var n = 0;n < fileInput.files.length;n++){
				console.log(fileInput.files[n].name +" "+fileInput.files[n].type+" "+fileInput.files[n].size+" "+fileInput.files[n].lastModifiedDate);
			}
		};

		//基于FileReader实例的文件读取API 
		document.getElementById("btn3").onclick = function(){
			for(var n = 0;n < fileInput.files.length;n++){
				var reader = new FileReader();
				// 文件上传事件列表：
				// 	onabort 中断时触发
				// 	onerror 出错时触发
				// 	onload 文件读取成功完成时触发
				// 	onloadend 读取完成触发，无论成功或失败
				// 	onloadstart 读取开始时触发
				// 	onprogress 读取中
				// */
				reader.onload = function(){
					console.log(this.result);
					console.log("*****************************************88");
				};
				reader.readAsBinaryString(fileInput.files[n]);
			}
		};

		document.getElementById("btn4").onclick = function(){
			for(var n = 0;n < fileInput.files.length;n++){
				var reader = new FileReader();
				// 文件上传事件列表：
				// 	onabort 中断时触发
				// 	onerror 出错时触发
				// 	onload 文件读取成功完成时触发
				// 	onloadend 读取完成触发，无论成功或失败
				// 	onloadstart 读取开始时触发
				// 	onprogress 读取中
				// */
				reader.onload = function(){
					console.log(this.result);
					console.log("*****************************************88");
				};
				reader.readAsText(fileInput.files[n], "utf-8");
			}
		};

		document.getElementById("btn5").onclick = function(){
			for(var n = 0;n < fileInput.files.length;n++){
				var reader = new FileReader();
				// 文件上传事件列表：
				// 	onabort 中断时触发
				// 	onerror 出错时触发
				// 	onload 文件读取成功完成时触发
				// 	onloadend 读取完成触发，无论成功或失败
				// 	onloadstart 读取开始时触发
				// 	onprogress 读取中
				// */
				reader.onload = function(){
					var url = this.result,
						imgObj = document.createElement("img");
					imgObj.src = url;
					document.body.appendChild(imgObj);
				};
				reader.readAsDataURL(fileInput.files[n]);
			}
		};
		</script>
</html>